package views

import (
	"fmt"
	"{{.ModulePath}}/models"
	"{{.ModulePath}}/router/routes"
)

templ {{.ResourceName}}Index({{.PluralName}} []models.{{.ResourceName}}) {
	@base() {
		<div>
			<div>
				<h1>{{.ResourceName}}s</h1>
				<a href={ templ.URL(routes.{{.ResourceName}}New.Path) }>New {{.ResourceName}}</a>
			</div>
			<div>
				<div>
					if len({{.PluralName}}) == 0 {
						<p>No {{.PluralName}} found.</p>
					} else {
						<div>
							<table>
								<thead>
									<tr>
										{{range .Fields}}<th>{{.DisplayName}}</th>
										{{end}}<th>Actions</th>
									</tr>
								</thead>
								<tbody>
									for _, {{.ResourceName | ToLower}} := range {{.PluralName}} {
										<tr>
											{{range .Fields}}<td>{{StringTableDisplay . $.ResourceName}}</td>
											{{end}}<td>
												<a href={ templ.URL(routes.{{.ResourceName}}Show.GetPath({{.ResourceName | ToLower}}.ID)) }>View</a>
												<a href={ templ.URL(routes.{{.ResourceName}}Edit.GetPath({{.ResourceName | ToLower}}.ID)) }>Edit</a>
											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					}
				</div>
			</div>
		</div>
	}
}

templ {{.ResourceName}}Show({{.ResourceName | ToLower}} models.{{.ResourceName}}) {
	@base() {
		<div>
			<div>
				<h1>{{.ResourceName}} Details</h1>
				<div>
					<a href={ templ.URL(routes.{{.ResourceName}}Edit.GetPath({{.ResourceName | ToLower}}.ID)) }>Edit</a>
					<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) }>Back to List</a>
				</div>
			</div>
			<div>
				<div>
					<div>
						{{range .Fields}}<div>
							<label>{{.DisplayName}}</label>
							<p>{{StringDisplay . $.ResourceName}}</p>
						</div>
						{{end}}
					</div>
				</div>
			</div>
		</div>
	}
}

templ {{.ResourceName}}New() {
	@base() {
		<div>
			<div>
				<h1>New {{.ResourceName}}</h1>
				<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) }>Back to List</a>
			</div>
			<div>
				<div>
					<form data-on-submit={ fmt.Sprintf("@post('%s')", routes.{{.ResourceName}}Create.Path) }>
						<div>
							<div>
								<h2>{{.ResourceName}} Information</h2>
								<p>Enter the details for the new {{.ResourceName | ToLower}}.</p>
								<div>
									{{range .Fields}}{{if not .IsSystemField}}<div>
										<label for="{{.DBName}}">
											{{.DisplayName}}
										</label>
										<div>
											<input id="{{.DBName}}" type="{{.InputType}}" data-bind="{{.DBName}}" />
										</div>
									</div>
									{{end}}{{end}}</div>
							</div>
						</div>
						<div>
							<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) }>Cancel</a>
							<button type="submit">Create {{.ResourceName}}</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	}
}

templ {{.ResourceName}}Edit({{.ResourceName | ToLower}} models.{{.ResourceName}}) {
	@base() {
		<div>
			<div>
				<h1>Edit {{.ResourceName}}</h1>
				<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) }>Back to List</a>
			</div>
			<div>
				<div>
					<form data-on-submit={ fmt.Sprintf("@put('%s')", routes.{{.ResourceName}}Update.GetPath({{.ResourceName | ToLower}}.ID)) }>
						<div>
							<div>
								<h2>{{.ResourceName}} Information</h2>
								<p>Update the details for this {{.ResourceName | ToLower}}.</p>
								<div>
									{{range .Fields}}{{if not .IsSystemField}}<div>
										<label for="{{.DBName}}">
											{{.DisplayName}}
										</label>
										<div>
											<input id="{{.DBName}}" type="{{.InputType}}" data-bind="{{.DBName}}" value={ {{StringValue . $.ResourceName}} } />
										</div>
									</div>
									{{end}}{{end}}</div>
							</div>
						</div>
						<div>
							<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) }>Cancel</a>
							<button type="submit">Update {{.ResourceName}}</button>
						</div>
					</form>
					<div>
						<button
							data-on-click={ fmt.Sprintf("@delete('%s')", routes.{{.ResourceName}}Destroy.GetPath({{.ResourceName | ToLower}}.ID)) }>Destroy {{.ResourceName}}</button>
					</div>
				</div>
			</div>
		</div>
	}
}
