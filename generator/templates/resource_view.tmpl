package views

import (
	"fmt"
	"{{.ModulePath}}/models"
	"{{.ModulePath}}/router/routes"
	"{{.ModulePath}}/views/internal/layouts"
)

templ {{.ResourceName}}Index({{.PluralName}} []models.{{.ResourceName}}) {
	@layouts.Base() {
		<div class="container mx-auto p-6">
			<div class="flex items-center justify-between mb-8">
				<h1 class="text-2xl font-semibold text-white">{{.ResourceName}}s</h1>
				<a href={ templ.URL(routes.{{.ResourceName}}New.Path) } class="rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">New {{.ResourceName}}</a>
			</div>
			<div class="bg-white/5 rounded-lg border border-white/10">
				<div class="p-6">
					if len({{.PluralName}}) == 0 {
						<p class="text-gray-400">No {{.PluralName}} found.</p>
					} else {
						<div class="overflow-x-auto">
							<table class="table w-full">
								<thead>
									<tr>
										{{range .Fields}}<th class="text-white font-semibold">{{.DisplayName}}</th>
										{{end}}<th class="text-white font-semibold">Actions</th>
									</tr>
								</thead>
								<tbody>
									for _, {{.ResourceName | ToLower}} := range {{.PluralName}} {
										<tr>
											{{range .Fields}}<td class="text-white">{{StringTableDisplay . $.ResourceName}}</td>
											{{end}}<td class="flex gap-2">
												<a href={ templ.URL(routes.{{.ResourceName}}Show.GetPath({{.ResourceName | ToLower}}.ID)) } class="btn btn-sm btn-primary">View</a>
												<a href={ templ.URL(routes.{{.ResourceName}}Edit.GetPath({{.ResourceName | ToLower}}.ID)) } class="btn btn-sm btn-outline">Edit</a>
											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					}
				</div>
			</div>
		</div>
	}
}

templ {{.ResourceName}}Show({{.ResourceName | ToLower}} models.{{.ResourceName}}) {
	@layouts.Base() {
		<div class="container mx-auto p-6">
			<div class="flex items-center justify-between mb-8">
				<h1 class="text-2xl font-semibold text-white">{{.ResourceName}} Details</h1>
				<div class="flex gap-2">
					<a href={ templ.URL(routes.{{.ResourceName}}Edit.GetPath({{.ResourceName | ToLower}}.ID)) } class="rounded-md bg-white/10 px-3 py-2 text-sm font-semibold text-white hover:bg-white/20 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white">Edit</a>
					<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) } class="text-sm font-semibold text-gray-400 hover:text-white">Back to List</a>
				</div>
			</div>
			<div class="bg-white/5 rounded-lg border border-white/10">
				<div class="p-6">
					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						{{range .Fields}}<div>
							<label class="block text-sm font-medium text-white mb-1">{{.DisplayName}}</label>
							<p class="text-lg text-gray-300">{{StringDisplay . $.ResourceName}}</p>
						</div>
						{{end}}
					</div>
				</div>
			</div>
		</div>
	}
}

templ {{.ResourceName}}New() {
	@layouts.Base() {
		<div class="container mx-auto p-6">
			<div class="flex items-center justify-between mb-8">
				<h1 class="text-2xl font-semibold text-white">New {{.ResourceName}}</h1>
				<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) } class="text-sm font-semibold text-gray-400 hover:text-white">Back to List</a>
			</div>
			<div class="bg-white/5 rounded-lg border border-white/10">
				<div class="p-6">
					<form data-on-submit={ fmt.Sprintf("@post('%s')", routes.{{.ResourceName}}Create.Path) }>
						<div class="space-y-6">
							<div class="border-b border-white/10 pb-6">
								<h2 class="text-base font-semibold text-white">{{.ResourceName}} Information</h2>
								<p class="mt-1 text-sm text-gray-400">Enter the details for the new {{.ResourceName | ToLower}}.</p>
								<div class="mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
									{{range .Fields}}{{if not .IsSystemField}}<div class="sm:col-span-3">
										<label for="{{.DBName}}" class="block text-sm font-medium text-white">
											{{.DisplayName}}
										</label>
										<div class="mt-2">
											<input id="{{.DBName}}" type="{{.InputType}}" data-bind="{{.DBName}}" class="block w-full rounded-md bg-white/5 px-3 py-1.5 text-base text-white outline-1 -outline-offset-1 outline-white/10 placeholder:text-gray-500 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-500 sm:text-sm" />
										</div>
									</div>
									{{end}}{{end}}</div>
							</div>
						</div>
						<div class="mt-6 flex items-center justify-end gap-x-6">
							<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) } class="text-sm font-semibold text-white hover:text-gray-300">Cancel</a>
							<button type="submit" class="rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">Create {{.ResourceName}}</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	}
}

templ {{.ResourceName}}Edit({{.ResourceName | ToLower}} models.{{.ResourceName}}) {
	@layouts.Base() {
		<div class="container mx-auto p-6">
			<div class="flex items-center justify-between mb-8">
				<h1 class="text-2xl font-semibold text-white">Edit {{.ResourceName}}</h1>
				<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) } class="text-sm font-semibold text-gray-400 hover:text-white">Back to List</a>
			</div>
			<div class="bg-white/5 rounded-lg border border-white/10">
				<div class="p-6">
					<form data-on-submit={ fmt.Sprintf("@put('%s')", routes.{{.ResourceName}}Update.GetPath({{.ResourceName | ToLower}}.ID)) }>
						<div class="space-y-6">
							<div class="border-b border-white/10 pb-6">
								<h2 class="text-base font-semibold text-white">{{.ResourceName}} Information</h2>
								<p class="mt-1 text-sm text-gray-400">Update the details for this {{.ResourceName | ToLower}}.</p>
								<div class="mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
									{{range .Fields}}{{if not .IsSystemField}}<div class="sm:col-span-3">
										<label for="{{.DBName}}" class="block text-sm font-medium text-white">
											{{.DisplayName}}
										</label>
										<div class="mt-2">
											<input id="{{.DBName}}" type="{{.InputType}}" data-bind="{{.DBName}}" class="block w-full rounded-md bg-white/5 px-3 py-1.5 text-base text-white outline-1 -outline-offset-1 outline-white/10 placeholder:text-gray-500 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-500 sm:text-sm" value={ {{StringValue . $.ResourceName}} } />
										</div>
									</div>
									{{end}}{{end}}</div>
							</div>
						</div>
						<div class="mt-6 flex items-center justify-end gap-x-6">
							<a href={ templ.URL(routes.{{.ResourceName}}Index.Path) } class="text-sm font-semibold text-white hover:text-gray-300">Cancel</a>
							<button type="submit" class="rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">Update {{.ResourceName}}</button>
						</div>
					</form>
					<div class="mt-6 pt-6 border-t border-white/10">
						<button 
							data-on-click={ fmt.Sprintf("@delete('%s')", routes.{{.ResourceName}}Destroy.GetPath({{.ResourceName | ToLower}}.ID)) }
							class="rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-white hover:bg-red-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500">Destroy {{.ResourceName}}</button>
					</div>
				</div>
			</div>
		</div>
	}
}
