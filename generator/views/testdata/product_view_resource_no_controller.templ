package views

import (
	"fmt"
	"github.com/example/shop/models"
)

templ ProductIndex(products []models.Product) {
	@base() {
		<div>
			<div>
				<h1>Products</h1>
				<a href="/">New Product</a>
			</div>
			<div>
				<div>
					if len(products) == 0 {
						<p>No products found.</p>
					} else {
						<div>
							<table>
								<thead>
									<tr>
										<th>Name</th>
										<th>Price</th>
										<th>Description</th>
										<th>Category Id</th>
										<th>In Stock</th>
										<th>Metadata</th>
										<th>Created At</th>
										<th>Updated At</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
									for _, product := range products {
										<tr>
											<td>{ product.Name }</td>
											<td>{ fmt.Sprintf("%f", product.Price) }</td>
											<td>{ product.Description }</td>
											<td>{ fmt.Sprintf("%d", product.CategoryID) }</td>
											<td>{ fmt.Sprintf("%t", product.InStock) }</td>
											<td>{ string(product.Metadata) }</td>
											<td>{ product.CreatedAt.String() }</td>
											<td>{ product.UpdatedAt.String() }</td>
											<td>
												<a href="/">View</a>
												<a href="/">Edit</a>
											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					}
				</div>
			</div>
		</div>
	}
}

templ ProductShow(product models.Product) {
	@base() {
		<div>
			<div>
				<h1>Product Details</h1>
				<div>
					<a href="/">Edit</a>
					<a href="/">Back to List</a>
				</div>
			</div>
			<div>
				<div>
					<div>
						<div>
							<label>Name</label>
							<p>{ product.Name }</p>
						</div>
						<div>
							<label>Price</label>
							<p>{ fmt.Sprintf("%f", product.Price) }</p>
						</div>
						<div>
							<label>Description</label>
							<p>{ product.Description }</p>
						</div>
						<div>
							<label>Category Id</label>
							<p>{ fmt.Sprintf("%d", product.CategoryID) }</p>
						</div>
						<div>
							<label>In Stock</label>
							<p>{ fmt.Sprintf("%t", product.InStock) }</p>
						</div>
						<div>
							<label>Metadata</label>
							<p>{ string(product.Metadata) }</p>
						</div>
						<div>
							<label>Created At</label>
							<p>{ product.CreatedAt.String() }</p>
						</div>
						<div>
							<label>Updated At</label>
							<p>{ product.UpdatedAt.String() }</p>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	}
}

templ ProductNew() {
	@base() {
		<div>
			<div>
				<h1>New Product</h1>
				<a href="/">Back to List</a>
			</div>
			<div>
				<div>
					<form data-on-submit={ fmt.Sprintf("@post('%s')", "/") }>
						<div>
							<div>
								<h2>Product Information</h2>
								<p>Enter the details for the new product.</p>
								<div>
									<div>
										<label for="name">
											Name
										</label>
										<div>
											<input id="name" type="text" data-bind="name" />
										</div>
									</div>
									<div>
										<label for="price">
											Price
										</label>
										<div>
											<input id="price" type="number" data-bind="price" />
										</div>
									</div>
									<div>
										<label for="description">
											Description
										</label>
										<div>
											<input id="description" type="text" data-bind="description" />
										</div>
									</div>
									<div>
										<label for="category_id">
											Category Id
										</label>
										<div>
											<input id="category_id" type="number" data-bind="category_id" />
										</div>
									</div>
									<div>
										<label for="in_stock">
											In Stock
										</label>
										<div>
											<input id="in_stock" type="checkbox" data-bind="in_stock" />
										</div>
									</div>
									<div>
										<label for="metadata">
											Metadata
										</label>
										<div>
											<input id="metadata" type="text" data-bind="metadata" />
										</div>
									</div>
									</div>
							</div>
						</div>
						<div>
							<a href="/">Cancel</a>
							<button type="submit">Create Product</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	}
}

templ ProductEdit(product models.Product) {
	@base() {
		<div>
			<div>
				<h1>Edit Product</h1>
				<a href="/">Back to List</a>
			</div>
			<div>
				<div>
					<form data-on-submit={ fmt.Sprintf("@put('%s')", "/") }>
						<div>
							<div>
								<h2>Product Information</h2>
								<p>Update the details for this product.</p>
								<div>
									<div>
										<label for="name">
											Name
										</label>
										<div>
											<input id="name" type="text" data-bind="name" value={ product.Name } />
										</div>
									</div>
									<div>
										<label for="price">
											Price
										</label>
										<div>
											<input id="price" type="number" data-bind="price" value={ fmt.Sprintf("%f", product.Price) } />
										</div>
									</div>
									<div>
										<label for="description">
											Description
										</label>
										<div>
											<input id="description" type="text" data-bind="description" value={ product.Description } />
										</div>
									</div>
									<div>
										<label for="category_id">
											Category Id
										</label>
										<div>
											<input id="category_id" type="number" data-bind="category_id" value={ fmt.Sprintf("%d", product.CategoryID) } />
										</div>
									</div>
									<div>
										<label for="in_stock">
											In Stock
										</label>
										<div>
											<input id="in_stock" type="checkbox" data-bind="in_stock" value={ fmt.Sprintf("%t", product.InStock) } />
										</div>
									</div>
									<div>
										<label for="metadata">
											Metadata
										</label>
										<div>
											<input id="metadata" type="text" data-bind="metadata" value={ string(product.Metadata) } />
										</div>
									</div>
									</div>
							</div>
						</div>
						<div>
							<a href="/">Cancel</a>
							<button type="submit">Update Product</button>
						</div>
					</form>
					<div>
						<button
							data-on-click={ fmt.Sprintf("@delete('%s')", "/")) }>Destroy Product</button>
					</div>
				</div>
			</div>
		</div>
	}
}
