package views

import (
	"fmt"
	"github.com/example/myapp/models"
	"github.com/example/myapp/router/routes"
)

templ UserIndex(users []models.User) {
	@base() {
		<div>
			<div>
				<h1>Users</h1>
				<a href={ templ.URL(routes.UserNew.Path) }>New User</a>
			</div>
			<div>
				<div>
					if len(users) == 0 {
						<p>No users found.</p>
					} else {
						<div>
							<table>
								<thead>
									<tr>
										<th>Email</th>
										<th>Name</th>
										<th>Age</th>
										<th>Is Active</th>
										<th>Created At</th>
										<th>Updated At</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
									for _, user := range users {
										<tr>
											<td>{ user.Email }</td>
											<td>{ user.Name }</td>
											<td>{ fmt.Sprintf("%d", user.Age) }</td>
											<td>{ fmt.Sprintf("%t", user.IsActive) }</td>
											<td>{ user.CreatedAt.String() }</td>
											<td>{ user.UpdatedAt.String() }</td>
											<td>
												<a href={ templ.URL(routes.UserShow.GetPath(user.ID)) }>View</a>
												<a href={ templ.URL(routes.UserEdit.GetPath(user.ID)) }>Edit</a>
											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					}
				</div>
			</div>
		</div>
	}
}

templ UserShow(user models.User) {
	@base() {
		<div>
			<div>
				<h1>User Details</h1>
				<div>
					<a href={ templ.URL(routes.UserEdit.GetPath(user.ID)) }>Edit</a>
					<a href={ templ.URL(routes.UserIndex.Path) }>Back to List</a>
				</div>
			</div>
			<div>
				<div>
					<div>
						<div>
							<label>Email</label>
							<p>{ user.Email }</p>
						</div>
						<div>
							<label>Name</label>
							<p>{ user.Name }</p>
						</div>
						<div>
							<label>Age</label>
							<p>{ fmt.Sprintf("%d", user.Age) }</p>
						</div>
						<div>
							<label>Is Active</label>
							<p>{ fmt.Sprintf("%t", user.IsActive) }</p>
						</div>
						<div>
							<label>Created At</label>
							<p>{ user.CreatedAt.String() }</p>
						</div>
						<div>
							<label>Updated At</label>
							<p>{ user.UpdatedAt.String() }</p>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	}
}

templ UserNew() {
	@base() {
		<div>
			<div>
				<h1>New User</h1>
				<a href={ templ.URL(routes.UserIndex.Path) }>Back to List</a>
			</div>
			<div>
				<div>
					<form data-on-submit={ fmt.Sprintf("@post('%s')", routes.UserCreate.Path) }>
						<div>
							<div>
								<h2>User Information</h2>
								<p>Enter the details for the new user.</p>
								<div>
									<div>
										<label for="email">
											Email
										</label>
										<div>
											<input id="email" type="text" data-bind="email" />
										</div>
									</div>
									<div>
										<label for="name">
											Name
										</label>
										<div>
											<input id="name" type="text" data-bind="name" />
										</div>
									</div>
									<div>
										<label for="age">
											Age
										</label>
										<div>
											<input id="age" type="number" data-bind="age" />
										</div>
									</div>
									<div>
										<label for="is_active">
											Is Active
										</label>
										<div>
											<input id="is_active" type="checkbox" data-bind="is_active" />
										</div>
									</div>
									</div>
							</div>
						</div>
						<div>
							<a href={ templ.URL(routes.UserIndex.Path) }>Cancel</a>
							<button type="submit">Create User</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	}
}

templ UserEdit(user models.User) {
	@base() {
		<div>
			<div>
				<h1>Edit User</h1>
				<a href={ templ.URL(routes.UserIndex.Path) }>Back to List</a>
			</div>
			<div>
				<div>
					<form data-on-submit={ fmt.Sprintf("@put('%s')", routes.UserUpdate.GetPath(user.ID)) }>
						<div>
							<div>
								<h2>User Information</h2>
								<p>Update the details for this user.</p>
								<div>
									<div>
										<label for="email">
											Email
										</label>
										<div>
											<input id="email" type="text" data-bind="email" value={ user.Email } />
										</div>
									</div>
									<div>
										<label for="name">
											Name
										</label>
										<div>
											<input id="name" type="text" data-bind="name" value={ user.Name } />
										</div>
									</div>
									<div>
										<label for="age">
											Age
										</label>
										<div>
											<input id="age" type="number" data-bind="age" value={ fmt.Sprintf("%d", user.Age) } />
										</div>
									</div>
									<div>
										<label for="is_active">
											Is Active
										</label>
										<div>
											<input id="is_active" type="checkbox" data-bind="is_active" value={ fmt.Sprintf("%t", user.IsActive) } />
										</div>
									</div>
									</div>
							</div>
						</div>
						<div>
							<a href={ templ.URL(routes.UserIndex.Path) }>Cancel</a>
							<button type="submit">Update User</button>
						</div>
					</form>
					<div>
						<button
							data-on-click={ fmt.Sprintf("@delete('%s')", routes.UserDestroy.GetPath(user.ID)) }>Destroy User</button>
					</div>
				</div>
			</div>
		</div>
	}
}
