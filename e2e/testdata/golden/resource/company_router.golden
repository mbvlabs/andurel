package router

import (
	"errors"
	"net/http"

	"testapp/controllers"
	"testapp/router/routes"

	"github.com/labstack/echo/v5"
)

func registerCompanyRoutes(handler *echo.Echo, company controllers.Companies) error {
	errs := []error{}

	_, err := handler.AddRoute(echo.Route{
		Method:  http.MethodGet,
		Path:    routes.CompanyIndex.Path(),
		Name:    routes.CompanyIndex.Name(),
		Handler: company.Index,
	})
	if err != nil {
		errs = append(errs, err)
	}

	_, err = handler.AddRoute(echo.Route{
		Method:  http.MethodGet,
		Path:    routes.CompanyShow.Path(),
		Name:    routes.CompanyShow.Name(),
		Handler: company.Show,
	})
	if err != nil {
		errs = append(errs, err)
	}

	_, err = handler.AddRoute(echo.Route{
		Method:  http.MethodGet,
		Path:    routes.CompanyNew.Path(),
		Name:    routes.CompanyNew.Name(),
		Handler: company.New,
	})
	if err != nil {
		errs = append(errs, err)
	}

	_, err = handler.AddRoute(echo.Route{
		Method:  http.MethodPost,
		Path:    routes.CompanyCreate.Path(),
		Name:    routes.CompanyCreate.Name(),
		Handler: company.Create,
	})
	if err != nil {
		errs = append(errs, err)
	}

	_, err = handler.AddRoute(echo.Route{
		Method:  http.MethodGet,
		Path:    routes.CompanyEdit.Path(),
		Name:    routes.CompanyEdit.Name(),
		Handler: company.Edit,
	})
	if err != nil {
		errs = append(errs, err)
	}

	_, err = handler.AddRoute(echo.Route{
		Method:  http.MethodPut,
		Path:    routes.CompanyUpdate.Path(),
		Name:    routes.CompanyUpdate.Name(),
		Handler: company.Update,
	})
	if err != nil {
		errs = append(errs, err)
	}

	_, err = handler.AddRoute(echo.Route{
		Method:  http.MethodDelete,
		Path:    routes.CompanyDestroy.Path(),
		Name:    routes.CompanyDestroy.Name(),
		Handler: company.Destroy,
	})
	if err != nil {
		errs = append(errs, err)
	}

	return errors.Join(errs...)
}
