package components

// --- Types ---

type CheckboxProps struct {
	ID         string
	Class      string
	Attributes templ.Attributes
	Name       string
	Value      string
	Checked    bool
	Disabled   bool
	Required   bool
}

// --- Class helpers ---

func checkboxClasses(p CheckboxProps) string {
	base := "h-4 w-4 shrink-0 rounded border border-base-300 bg-base-200 accent-primary transition focus:ring-2 focus:ring-primary/50 disabled:cursor-not-allowed disabled:opacity-60"
	return cn(base, p.Class)
}

// --- Templ ---

templ Checkbox(props ...CheckboxProps) {
	{{ "{{" }} var p CheckboxProps {{ "}}" }}
	if len(props) > 0 {
		{{ "{{" }} p = props[0] {{ "}}" }}
	}
	<input
		type="checkbox"
		class={ checkboxClasses(p) }
		if p.ID != "" {
			id={ p.ID }
		}
		if p.Name != "" {
			name={ p.Name }
			data-bind={ p.Name }
		}
		if p.Value != "" {
			value={ p.Value }
		}
		if p.Checked {
			checked
		}
		if p.Disabled {
			disabled
		}
		if p.Required {
			required
		}
		if p.Name != "" {
			data-attr:disabled="$submitting"
		}
		{ p.Attributes... }
	/>
}
