package components

// --- Types ---

type AlertVariant string

const (
	AlertVariantDefault AlertVariant = "default"
	AlertVariantInfo    AlertVariant = "info"
	AlertVariantSuccess AlertVariant = "success"
	AlertVariantWarning AlertVariant = "warning"
	AlertVariantError   AlertVariant = "error"
)

type AlertProps struct {
	Class      string
	Variant    AlertVariant
	Title      string
	Attributes templ.Attributes
}

// --- Class helpers ---

func alertVariantClasses(v AlertVariant) string {
	switch v {
	case AlertVariantInfo:
		return "border-info/50 text-info [&>svg]:text-info"
	case AlertVariantSuccess:
		return "border-success/50 text-success [&>svg]:text-success"
	case AlertVariantWarning:
		return "border-warning/50 text-warning [&>svg]:text-warning"
	case AlertVariantError:
		return "border-error/50 text-error [&>svg]:text-error"
	default:
		return "border-base-300 text-base-content"
	}
}

func alertClasses(p AlertProps) string {
	base := "relative w-full rounded-box border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7"
	return cn(base, alertVariantClasses(p.Variant), p.Class)
}

// --- Templ ---

templ Alert(props ...AlertProps) {
	{{ "{{" }} var p AlertProps {{ "}}" }}
	if len(props) > 0 {
		{{ "{{" }} p = props[0] {{ "}}" }}
	}
	<div role="alert" class={ alertClasses(p) } { p.Attributes... }>
		if p.Title != "" {
			<h5 class="mb-1 font-medium leading-none tracking-tight">{ p.Title }</h5>
		}
		<div class="text-sm [&_p]:leading-relaxed">
			{ children... }
		</div>
	</div>
}
