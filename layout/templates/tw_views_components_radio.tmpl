package components

// --- Types ---

type RadioGroupProps struct {
	Class      string
	Attributes templ.Attributes
}

type RadioProps struct {
	ID         string
	Class      string
	Attributes templ.Attributes
	Name       string
	Value      string
	Label      string
	Checked    bool
	Disabled   bool
}

// --- Class helpers ---

func radioGroupClasses(p RadioGroupProps) string {
	return cn("flex flex-col gap-2", p.Class)
}

func radioClasses(p RadioProps) string {
	base := "h-4 w-4 shrink-0 border border-base-300 bg-base-200 accent-primary transition focus:ring-2 focus:ring-primary/50 disabled:cursor-not-allowed disabled:opacity-60"
	return cn(base, p.Class)
}

// --- Templ ---

templ RadioGroup(props ...RadioGroupProps) {
	{{ "{{" }} var p RadioGroupProps {{ "}}" }}
	if len(props) > 0 {
		{{ "{{" }} p = props[0] {{ "}}" }}
	}
	<div role="radiogroup" class={ radioGroupClasses(p) } { p.Attributes... }>
		{ children... }
	</div>
}

templ Radio(props ...RadioProps) {
	{{ "{{" }} var p RadioProps {{ "}}" }}
	if len(props) > 0 {
		{{ "{{" }} p = props[0] {{ "}}" }}
	}
	<label class="flex items-center gap-2 text-sm text-base-content">
		<input
			type="radio"
			class={ radioClasses(p) }
			if p.ID != "" {
				id={ p.ID }
			}
			if p.Name != "" {
				name={ p.Name }
				data-bind={ p.Name }
			}
			if p.Value != "" {
				value={ p.Value }
			}
			if p.Checked {
				checked
			}
			if p.Disabled {
				disabled
			}
			if p.Name != "" {
				data-attr:disabled="$submitting"
			}
			{ p.Attributes... }
		/>
		if p.Label != "" {
			{ p.Label }
		}
	</label>
}
