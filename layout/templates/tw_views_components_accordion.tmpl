package components

// --- Class helpers ---

func accordionClasses(class string) string {
	return cn("w-full", class)
}

func accordionItemClasses(class string) string {
	return cn("border-b border-base-300", class)
}

func accordionTriggerClasses(class string) string {
	return cn("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline cursor-pointer [&[aria-expanded=true]>svg]:rotate-180", class)
}

func accordionContentClasses(class string) string {
	return cn("overflow-hidden text-sm", class)
}

// --- Templ ---

// Accordion creates an expandable/collapsible content container. Use it to organize
// long content into vertically stacked sections that users can expand one at a time.
// Compose with AccordionItem, AccordionTrigger, and AccordionContent sub-components.
//
//	@components.Accordion() {
//		@components.AccordionItem() {
//			@components.AccordionTrigger("Section Title")
//			@components.AccordionContent() { Hidden content here }
//		}
//	}
templ Accordion(opts ...Opt) {
	<div class={ accordionClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ children... }
	</div>
}

templ AccordionItem(opts ...Opt) {
	<div class={ accordionItemClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ children... }
	</div>
}

templ AccordionTrigger(label string, opts ...Opt) {
	<button type="button" class={ accordionTriggerClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ label }
		<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 transition-transform duration-200"><path d="m6 9 6 6 6-6"></path></svg>
	</button>
}

templ AccordionContent(opts ...Opt) {
	<div class={ accordionContentClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		<div class="pb-4 pt-0">
			{ children... }
		</div>
	</div>
}
