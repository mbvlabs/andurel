package views

import (
	"net/http"
	"{{.ModuleName}}/internal/hypermedia"
	"{{.ModuleName}}/router/routes"
	"{{.ModuleName}}/views/components"
)

templ RegistrationForm() {
	@base() {
		<main class="flex-1 flex items-center justify-center px-6 py-10">
			<div class="mx-auto flex w-full max-w-md flex-col gap-6">
				<div class="rounded-box border border-base-300 bg-base-100 p-8 shadow-lg">
					<form
						class="space-y-5"
						data-indicator:submitting
						data-on:submit={ "!$submitting && " + hypermedia.DataAction(http.MethodPost, routes.RegistrationCreate.URL()) }
					>
						<div class="space-y-1">
							<h2 class="text-xl font-semibold text-base-content">Create an account</h2>
							<p class="text-sm text-base-content/60">Enter your details below to create your account</p>
						</div>
						<div class="space-y-4">
							<div class="w-full space-y-1">
								@components.Label(components.LabelProps{For: "email"}) { Email }
								@components.Input(components.InputProps{ID: "email", Name: "email", Type: components.InputTypeEmail, Required: true})
							</div>
							<div class="w-full space-y-1">
								@components.Label(components.LabelProps{For: "password"}) { Password }
								@components.Input(components.InputProps{ID: "password", Name: "password", Type: components.InputTypePassword, Required: true})
							</div>
							<div class="w-full space-y-1">
								@components.Label(components.LabelProps{For: "confirmPassword"}) { Confirm Password }
								@components.Input(components.InputProps{ID: "confirmPassword", Name: "confirmPassword", Type: components.InputTypePassword, Required: true})
							</div>
						</div>
						@components.Button(components.ButtonProps{Type: components.ButtonTypeSubmit, FullWidth: true, Attributes: templ.Attributes{"data-attr:disabled": "$submitting"}}) {
							<span data-show="!$submitting">Sign Up</span>
							<span data-show="$submitting">Loading</span>
						}
					</form>
					<p class="mt-6 text-center text-sm text-base-content/60">
						Already have an account? <a class="text-base-content hover:underline" href={ templ.SafeURL(routes.SessionNew.URL()) }>Login</a>
					</p>
				</div>
			</div>
		</main>
	}
}
