package components

// --- Types ---

type TagsInputProps struct {
	ID          string
	Class       string
	Attributes  templ.Attributes
	Name        string
	Placeholder string
}

// --- Class helpers ---

func tagsInputContainerClasses(p TagsInputProps) string {
	base := "flex min-h-9 w-full flex-wrap items-center gap-1.5 rounded-field border border-base-300 bg-base-200 px-3 py-1.5 text-sm shadow-inner transition focus-within:border-primary focus-within:ring-2 focus-within:ring-primary/50"
	return cn(base, p.Class)
}

// --- Templ ---

templ TagsInput(props ...TagsInputProps) {
	{{ "{{" }} var p TagsInputProps {{ "}}" }}
	if len(props) > 0 {
		{{ "{{" }} p = props[0] {{ "}}" }}
	}
	<div class={ tagsInputContainerClasses(p) } { p.Attributes... }>
		{ children... }
		<input
			type="text"
			class="flex-1 bg-transparent outline-none placeholder:text-base-content/40 min-w-[80px]"
			if p.ID != "" {
				id={ p.ID }
			}
			if p.Placeholder != "" {
				placeholder={ p.Placeholder }
			}
			if p.Name != "" {
				data-bind={ p.Name }
				data-attr:disabled="$submitting"
			}
		/>
	</div>
}

templ Tag(props ...BadgeProps) {
	{{ "{{" }} var p BadgeProps {{ "}}" }}
	if len(props) > 0 {
		{{ "{{" }} p = props[0] {{ "}}" }}
	}
	<span class={ cn("inline-flex items-center gap-1 rounded-full bg-base-300 px-2 py-0.5 text-xs font-medium text-base-content", p.Class) } { p.Attributes... }>
		{ children... }
	</span>
}
