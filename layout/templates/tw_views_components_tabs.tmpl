package components

// --- Class helpers ---

func tabsClasses(class string) string {
	return cn("w-full", class)
}

func tabsListClasses(class string) string {
	return cn("inline-flex h-9 items-center justify-center rounded-box bg-base-200 p-1 text-base-content/60", class)
}

func tabsTriggerClasses(active bool, class string) string {
	base := "inline-flex items-center justify-center whitespace-nowrap rounded-field px-3 py-1 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 disabled:pointer-events-none disabled:opacity-60"
	if active {
		return cn(base, "bg-base-100 text-base-content shadow-sm", class)
	}
	return cn(base, "hover:text-base-content", class)
}

func tabsContentClasses(class string) string {
	return cn("mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50", class)
}

// --- Templ ---

// Tabs organizes content into switchable panels. Use it when content can be logically
// grouped into parallel views (e.g., Account/Settings, Code/Preview). Compose with
// TabsList, TabsTrigger, and TabsContent sub-components.
//
//	@components.Tabs() {
//		@components.TabsList() {
//			@components.TabsTrigger("Tab 1", true)
//			@components.TabsTrigger("Tab 2", false)
//		}
//		@components.TabsContent() { Content for tab 1 }
//	}
templ Tabs(opts ...Opt) {
	<div class={ tabsClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ children... }
	</div>
}

templ TabsList(opts ...Opt) {
	<div role="tablist" class={ tabsListClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ children... }
	</div>
}

templ TabsTrigger(label string, active bool, opts ...Opt) {
	<button type="button" role="tab" class={ tabsTriggerClasses(active, classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ label }
	</button>
}

templ TabsContent(opts ...Opt) {
	<div role="tabpanel" class={ tabsContentClasses(classFrom(opts)) } if attrsFrom(opts) != nil { { attrsFrom(opts)... } }>
		{ children... }
	</div>
}
