set dotenv-load

# alias
alias r := run
{{- if eq .Database "postgresql"}}
alias cdd := connect-database-docker
{{- end}}

default:
    @just --list

{{- if eq .Database "postgresql"}}

# database 
connect-database-docker conntainer_id name:
	docker exec -it {{`{{conntainer_id}}`}} psql -U postgres {{`{{name}}`}}

{{- else if eq .Database "sqlite"}}

{{- end}}

# sqlc
compile-queries:
	go tool sqlc -f ./database/sqlc.yaml compile

generate-queries:
	go tool sqlc -f ./database/sqlc.yaml generate

compile-generate-queries: compile-queries generate-queries

# code quality
golangci:
	golangci-lint run

vet:
	@go vet ./...

golines:
	@golines -w -m 100 controllers models router router/routes 
