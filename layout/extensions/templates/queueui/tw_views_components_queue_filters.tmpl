package components

import (
	"fmt"
	"{{.ModuleName}}/router/routes"
)

templ QueueFilters(stateFilter, queueFilter, kindFilter string, kinds []string, queueNames []string) {
	<div class="bg-base-100 p-4 rounded-lg shadow mb-4">
		<div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
			<div>
				<label for="state" class="block text-sm font-medium mb-2">State</label>
				<select
					id="state"
					data-bind-state
					data-on-change={ fmt.Sprintf("@get('%s?state=' + $state + '&queue=' + $queue + '&kind=' + $kind)", routes.QueueJobsList.URL()) }
					class="select select-bordered w-full"
				>
					<option value="">All States</option>
					<option value="available" selected?={ stateFilter == "available" }>Available</option>
					<option value="running" selected?={ stateFilter == "running" }>Running</option>
					<option value="completed" selected?={ stateFilter == "completed" }>Completed</option>
					<option value="scheduled" selected?={ stateFilter == "scheduled" }>Scheduled</option>
					<option value="retryable" selected?={ stateFilter == "retryable" }>Retryable</option>
					<option value="cancelled" selected?={ stateFilter == "cancelled" }>Cancelled</option>
					<option value="discarded" selected?={ stateFilter == "discarded" }>Discarded</option>
					<option value="pending" selected?={ stateFilter == "pending" }>Pending</option>
				</select>
			</div>
			<div>
				<label for="queue" class="block text-sm font-medium mb-2">Queue</label>
				<select
					id="queue"
					data-bind-queue
					data-on-change={ fmt.Sprintf("@get('%s?state=' + $state + '&queue=' + $queue + '&kind=' + $kind)", routes.QueueJobsList.URL()) }
					class="select select-bordered w-full"
				>
					<option value="">All Queues</option>
					for _, queueName := range queueNames {
						<option value={ queueName } selected?={ queueFilter == queueName }>{ queueName }</option>
					}
				</select>
			</div>
			<div>
				<label for="kind" class="block text-sm font-medium mb-2">Kind</label>
				<select
					id="kind"
					data-bind-kind
					data-on-change={ fmt.Sprintf("@get('%s?state=' + $state + '&queue=' + $queue + '&kind=' + $kind)", routes.QueueJobsList.URL()) }
					class="select select-bordered w-full"
				>
					<option value="">All Kinds</option>
					for _, kind := range kinds {
						<option value={ kind } selected?={ kindFilter == kind }>{ kind }</option>
					}
				</select>
			</div>
		</div>
	</div>
}
