{{- if eq .Database "postgresql" -}}
-- name: QueryPaddleProductByID :one
SELECT * FROM paddle_products WHERE id=$1;

-- name: QueryPaddleProductByPaddleID :one
SELECT * FROM paddle_products WHERE paddle_product_id=$1;

-- name: QueryActiveProducts :many
SELECT * FROM paddle_products WHERE is_active=true ORDER BY created_at DESC;

-- name: QueryAllProducts :many
SELECT * FROM paddle_products ORDER BY created_at DESC;

-- name: InsertPaddleProduct :one
INSERT INTO paddle_products (
    id, created_at, updated_at, paddle_product_id, paddle_price_id,
    name, description, price_amount, price_currency, image_url, is_active
)
VALUES ($1, now(), now(), $2, $3, $4, $5, $6, $7, $8, $9)
RETURNING *;

-- name: UpdatePaddleProduct :one
UPDATE paddle_products
SET updated_at=now(), name=$2, description=$3, price_amount=$4,
    price_currency=$5, image_url=$6, is_active=$7
WHERE id = $1
RETURNING *;

-- name: DeletePaddleProduct :exec
DELETE FROM paddle_products WHERE id=$1;
{{- else if eq .Database "sqlite" -}}
-- name: QueryPaddleProductByID :one
SELECT * FROM paddle_products WHERE id=?;

-- name: QueryPaddleProductByPaddleID :one
SELECT * FROM paddle_products WHERE paddle_product_id=?;

-- name: QueryActiveProducts :many
SELECT * FROM paddle_products WHERE is_active=1 ORDER BY created_at DESC;

-- name: QueryAllProducts :many
SELECT * FROM paddle_products ORDER BY created_at DESC;

-- name: InsertPaddleProduct :one
INSERT INTO paddle_products (
    id, created_at, updated_at, paddle_product_id, paddle_price_id,
    name, description, price_amount, price_currency, image_url, is_active
)
VALUES (?, datetime('now'), datetime('now'), ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING *;

-- name: UpdatePaddleProduct :one
UPDATE paddle_products
SET updated_at=datetime('now'), name=?, description=?, price_amount=?,
    price_currency=?, image_url=?, is_active=?
WHERE id = ?
RETURNING *;

-- name: DeletePaddleProduct :exec
DELETE FROM paddle_products WHERE id=?;
{{- end -}}
