package services

import (
	"context"
	"log/slog"
)

type EmailService interface {
	SendVerificationEmail(ctx context.Context, email, token string) error
	SendPasswordResetEmail(ctx context.Context, email, token string) error
}

type ConsoleEmailService struct {
	baseURL string
}

func NewConsoleEmailService(baseURL string) *ConsoleEmailService {
	return &ConsoleEmailService{baseURL: baseURL}
}

func (c *ConsoleEmailService) SendVerificationEmail(ctx context.Context, email, token string) error {
	link := c.baseURL + "/verify-email?token=" + token
	slog.InfoContext(ctx, "Verification email",
		"to", email,
		"link", link,
	)
	return nil
}

func (c *ConsoleEmailService) SendPasswordResetEmail(ctx context.Context, email, token string) error {
	link := c.baseURL + "/reset-password?token=" + token
	slog.InfoContext(ctx, "Password reset email",
		"to", email,
		"link", link,
	)
	return nil
}